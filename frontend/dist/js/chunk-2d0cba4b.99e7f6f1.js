(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cba4b"],{"4b18":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-view",{attrs:{title:"应用类型"}},[a("oa-content")],1)},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("r-filter",{on:{search:t.handleSearch},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.query;return a("r-list",{ref:"list",attrs:{query:e}})}}])})],1)},i=[],c=(a("ac1f"),a("841c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("r-paging",{ref:"paging",attrs:{loadData:t.loadData,tableOpt:{maxHeight:t.tableHeight}}},[a("el-table-column",{attrs:{prop:"categoryName",label:"类别","min-width":"120"}}),a("el-table-column",{attrs:{prop:"description",label:"说明","min-width":"120"}}),a("el-table-column",{attrs:{prop:"statusName",label:"状态","min-width":"120"}}),a("el-table-column",{attrs:{prop:"",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",{staticClass:"g-operation g-m-r-8",on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),"valid"==n.status?a("span",{staticClass:"g-pointer g-c-red-mid",on:{click:function(e){return t.handleForbid(n)}}},[t._v("禁用")]):a("span",{staticClass:"g-pointer  g-c-red-mid",on:{click:function(e){return t.handleOpen(n)}}},[t._v("启用")])]}}])})],1)],1)}),l=[],s=(a("4160"),a("5319"),a("159b"),a("5530")),u=(a("96cf"),a("1da1")),d=(a("5466"),a("450d"),a("ecdf")),p=a.n(d),f=a("1b84"),m=a("535f"),h=a("f692"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"add"==t.action?"新增应用类别":"编辑应用类别",visible:t.visible},on:{close:t.handleCancel}},[a("el-form",{ref:"form",staticClass:"g-m-r-20",attrs:{model:t.formData,rules:t.rules,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"categoryName"}},[a("el-input",{attrs:{placeholder:"请输入类别名称",maxlength:20,clearable:""},model:{value:t.formData.categoryName,callback:function(e){t.$set(t.formData,"categoryName",e)},expression:"formData.categoryName"}})],1),a("el-form-item",{attrs:{label:"说明:",prop:"description"}},[a("el-input",{attrs:{placeholder:"请输入说明",maxlength:200,type:"textarea",clearable:""},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSave}},[t._v("确 定")]),a("el-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取 消")])],1)],1)},b=[],v=(a("a4d3"),a("e01a"),a("8c09")),y={name:"c-confirm",components:{},props:{record:Object,action:String},data:function(){var t={categoryName:"",description:"",status:"valid"};return"update"===this.action&&(t.categoryName=this.record.categoryName,t.description=this.record.description,t.id=this.record.id),{formData:t,visible:!1,loading:!1,rules:{categoryName:[{required:!0,type:"string",message:"请输入类别名称",trigger:"blur"}],description:[{required:!0,type:"string",message:"请输入类别说明",trigger:"blur"}]}}},mounted:function(){this.visible=!0},methods:{handleSave:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$refs.form.validate().catch((function(){return!1}));case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return",t.loading=!1);case 6:console.log("post",t.formData),n="add"===t.action?"APP_CATEGORY_CREATE_POST":"APP_CATEGORY_UPDATE_POST",t.$post(n,Object(s["a"])({},t.formData)).then((function(e){t.handleOk()})).catch((function(e){t.loading=!1}));case 9:case"end":return e.stop()}}),e)})))()},handleOk:function(){this.visible=!1,this.$emit("sure")},handleCancel:function(){this.visible=!1,this.$emit("close")}}},_=y,O=new v["a"](y),w=_,C=a("2877"),$=Object(C["a"])(w,g,b,!1,null,null,null),k=($.exports,{name:"tpl",mixins:[Object(h["a"])()],props:{query:Object},components:{"r-paging":m["a"],"el-table-column":p.a},data:function(){return{statusMap:{valid:"正常",forbidden:"禁用"}}},created:function(){},beforeDestroy:function(){},methods:{loadData:function(t,e){var a=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=Object(f["c"])(Object(s["a"])(Object(s["a"])({},a.query),{},{currentPage:t,pageSize:e})),a.$router.replace({query:r}),n.abrupt("return",a.$getList("APP_CATEGORY_LIST_GET",r).then((function(t){return t.data.forEach((function(t){t.statusName=a.statusMap[t.status]||"--"})),t})));case 3:case"end":return n.stop()}}),n)})))()},search:function(){this.$refs.paging.resetFirst()},resetCur:function(){this.$refs.paging.resetCur()},handleTestPop:function(){},handleEdit:function(t){var e=this;O.popup({action:"update",record:t}).then((function(){e.resetCur()})).catch((function(t){return t&&console.error(err)}))},handleForbid:function(t){var e=this;this.$confirm.popup({title:"提示",status:"warn",content:"确定禁用"+t.categoryName+"吗？",onOk:function(){return e.$post("APP_CATEGORY_UPDATE_AUDIT_INFO_POST",{id:t.id,status:"forbidden"}).then((function(){return e.resetCur()}))}})},handleOpen:function(t){var e=this;this.$confirm.popup({title:"提示",content:"确定启用"+t.categoryName+"吗？",onOk:function(){return e.$post("APP_CATEGORY_UPDATE_AUDIT_INFO_POST",{id:t.id,status:"valid"}).then((function(){return e.resetCur()}))}})}}}),x=k,N=Object(C["a"])(x,c,l,!1,null,null,null),T=N.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"g-flex g-m-b-12 js-filter"},[a("div",{staticClass:"g-flex-1"},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入类别名称搜索",clearable:""},on:{change:t.handleSearch,close:t.handleSearch},model:{value:t.query.categoryName,callback:function(e){t.$set(t.query,"categoryName",e)},expression:"query.categoryName"}}),a("el-button",{staticClass:"g-m-l-12",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")])],1),a("el-button",{staticClass:"g-m-l-12",attrs:{type:"primary"},on:{click:t.addAppType}},[t._v("新增应用类别")])],1),t._t("default",null,{query:t.query})],2)},E=[],P={name:"comp-",components:{},data:function(){return{query:{categoryName:this.$route.query.categoryName||""}}},methods:{handleSearch:function(){this.$emit("search",this.query)},addAppType:function(){var t=this;O.popup({action:"add"}).then((function(){t.handleSearch()})).catch((function(t){return t&&console.error(t)}))}}},S=P,A=Object(C["a"])(S,D,E,!1,null,null,null),j=A.exports,q={name:"comp-",components:{"r-list":T,"r-filter":j},data:function(){return{}},methods:{handleSearch:function(t){this.$refs.list.search()}}},R=q,G=Object(C["a"])(R,o,i,!1,null,null,null),F=G.exports,I={name:"view-container",components:{"oa-content":F}},U=I,Y=Object(C["a"])(U,n,r,!1,null,null,null);e["default"]=Y.exports}}]);