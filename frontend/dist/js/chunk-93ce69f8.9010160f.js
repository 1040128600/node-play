(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93ce69f8"],{"001c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-view",{attrs:{title:"应用审核"}},[a("oa-content")],1)},i=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("r-filter",{on:{search:t.handleSearch},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.query;return a("r-tab-list",{ref:"list",attrs:{query:e}})}}])})],1)},r=[],s=(a("ac1f"),a("841c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{value:t.curTab},on:{"tab-click":t.handleTabChange}},t._l(t.tabs,(function(e){return a("el-tab-pane",{key:e.value,attrs:{label:e.label,name:e.value}},[a("r-paging",{ref:"paging",refInFor:!0,attrs:{loadData:t.loadData,show:e.value===t.curTab,tableOpt:{maxHeight:t.tableHeight}}},[a("el-table-column",{attrs:{prop:"appName",label:"应用名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return a("span",{staticClass:"g-operation",on:{click:function(e){return t.handleDetail(n)}}},[t._v(t._s(n.appName))])}}],null,!0)}),a("el-table-column",{attrs:{prop:"isvName",label:"开发商","min-width":"120"}}),a("el-table-column",{attrs:{prop:"catName",label:"应用分类","min-width":"120"}}),a("el-table-column",{attrs:{prop:"applyTypeName",label:"申请类型","min-width":"120"}}),a("el-table-column",{attrs:{prop:"groupAppVersion",label:"版本","min-width":"120"}}),a("el-table-column",{attrs:{prop:"applyTime",label:"申请时间","min-width":"120"}}),a("el-table-column",{attrs:{prop:"auditStatusName",label:"审核状态","min-width":"120"}}),a("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"g-operation",on:{click:function(a){return t.handleDetail(e.row)}}},[t._v("详情")])]}}],null,!0)})],1)],1)})),1)],1)}),o=[],c=(a("c740"),a("4160"),a("b0c0"),a("5319"),a("159b"),a("ade3")),u=a("5530"),p=(a("96cf"),a("1da1")),d=(a("5466"),a("450d"),a("ecdf")),f=a.n(d),h=a("1b84"),m=a("535f"),b=a("f692"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{staticClass:"v-app-audit",attrs:{title:"审核详情",visible:t.visible,direction:"rtl",modal:!1,size:"520px"},on:{"update:visible":function(e){t.visible=e},close:t.handleClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"g-fd-c",staticStyle:{height:"100%"}},[a("div",{staticClass:"g-flex-1 g-pd-l-20 g-pd-r-20",staticStyle:{overflow:"auto",height:"300px"}},[a("r-info-item",{attrs:{label:"名称",content:t.info.appName}}),a("r-info-item",{attrs:{label:"开发商",content:t.info.isvName}}),a("r-info-item",{attrs:{label:"应用分类",content:t.info.appCategory}}),a("r-info-item",{attrs:{label:"类型",content:t.info.applyTypeName}}),a("r-info-item",{attrs:{label:"版本"}},[a("span",[t._v(t._s(t.info.version))]),a("span",{staticClass:"g-operation g-m-l-10",on:{click:t.handleDownload}},[t._v("点击下载")])]),a("r-info-item",{attrs:{label:"LOGO"}},[a("img",{staticClass:"g-inline-block g-br-4",staticStyle:{width:"32px",height:"32px"},attrs:{src:t.info.logo}})]),a("r-info-item",{attrs:{label:"介绍",content:t.info.description}}),a("r-info-item",{attrs:{label:"审核状态",content:t.info.auditStatusName}}),"auditing"!==t.info.status?a("r-info-item",{attrs:{label:("pass"===t.info.status?"通过":"驳回")+"说明",content:t.info.auditRemark}}):t._e()],1),"auditing"===t.record.status?a("r-footer",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAudit("pass")}}},[t._v("通过")]),a("el-button",{on:{click:function(e){return t.handleAudit("reject")}}},[t._v("驳回")])],1):t._e()],1)])},v=[],y=(a("d3b7"),a("8c09")),_=(a("c1df"),a("2ef0"),a("0d3f")),w=a("2cfa"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"pass"===t.type?"审核通过":"审核驳回",visible:t.visible},on:{close:t.handleCancel}},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"pass"===t.type?"通过说明:":"驳回说明:",prop:"message"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:4,placeholder:"请输入"+("pass"===t.type?"通过":"驳回")+"说明"},model:{value:t.formData.message,callback:function(e){t.$set(t.formData,"message",e)},expression:"formData.message"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSave}},[t._v("确 定")]),a("el-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取 消")])],1)],1)},O=[],C=(a("a9e3"),{name:"c-confirm",components:{},props:{type:String,applyId:[String,Number]},data:function(){return{visible:!1,loading:!1,titleMap:{pass:"审核通过",reject:"审核驳回"},formData:{applyId:this.applyId,message:""},rules:{message:[{required:!0,type:"string",message:"请输入".concat("pass"===this.type?"通过":"驳回","说明"),trigger:"blur"}]}}},computed:{},mounted:function(){this.visible=!0},methods:{handleOk:function(){this.visible=!1,this.$emit("sure")},handleCancel:function(){this.visible=!1,this.$emit("close")},handleSave:function(){var t=this,e="APP_AUDIT_APPROVE_POST";"reject"===this.type&&(e="APP_AUDIT_REJECT_POST"),this.$post(e,Object(u["a"])({},this.formData)).then((function(){t.$message.success("审核成功"),t.handleOk()}))}}}),T=C,k=new y["a"](C),$=T,D=a("2877"),j=Object(D["a"])($,S,O,!1,null,null,null),x=(j.exports,{auditStatus:{auditing:"待审核",pass:"审核通过",reject:"审核驳回"},applyType:{publish:"发布",update:"更新",unshelve:"下架",shelve:"上架"}}),N=x,q={name:"developList-addDeveloper",components:{"r-info-item":_["a"],"r-footer":w["a"]},props:{record:Object,resetFirst:Function,resetCur:Function},data:function(){return{visible:!1,loading:!1,info:{appName:"",isvName:"",appCategory:"",status:"",auditStatusName:"",applyType:"",applyTypeName:"",version:"",logo:"",description:"",auditRemark:""}}},watch:{record:function(t){this.loadData()}},mounted:function(){this.visible=!0,this.loadData()},methods:{handleOk:function(){this.visible=!1,this.$emit("sure")},handleClose:function(){this.visible=!1,this.$emit("close")},loadData:function(){var t=this;this.loading=!0,this.$get("APP_AUDIT_RECORD_DETAIL",{applyId:this.record.applyId}).then((function(e){e.data.auditStatusName=N.auditStatus[e.data.status],e.data.applyTypeName=N.applyType[e.data.applyType],t.info=e.data})).finally((function(){t.loading=!1}))},handleAudit:function(t){var e=this;k.popup({type:t,applyId:this.record.applyId}).then((function(){e.resetCur&&e.resetCur(),e.handleOk()})).catch((function(t){return t&&console.errro(t)}))},handleDownload:function(){this.info.downloadUrl?window.open(this.info.downloadUrl):this.$message.error("暂不支持下载此版本的应用")}}},E=q,I=new y["a"](q),A=E,P=Object(D["a"])(A,g,v,!1,null,null,null),R=(P.exports,{name:"tpl",mixins:[Object(b["a"])({extra:50})],props:{query:Object},components:{"r-paging":m["a"],"el-table-column":f.a},data:function(){return{curTab:this.$route.query.status||"auditing",tabKey:"status",tabs:[{label:"待审核",value:"auditing"},{label:"审核通过",value:"pass"},{label:"审核驳回",value:"reject"}]}},created:function(){},beforeDestroy:function(){},methods:{loadData:function(t,e){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return l=Object(h["c"])(Object(u["a"])(Object(u["a"])({},a.query),{},(i={},Object(c["a"])(i,a.tabKey,a.curTab),Object(c["a"])(i,"currentPage",t),Object(c["a"])(i,"pageSize",e),i))),a.$router.replace({query:l}),n.abrupt("return",a.$getList("APP_AUDIT_LIST_GET",l).then((function(t){return t.data.forEach((function(t){t.auditStatusName=N.auditStatus[t.status],t.applyTypeName=N.applyType[t.applyType]})),console.log(t),t})));case 3:case"end":return n.stop()}}),n)})))()},search:function(){var t=this;this.tabs.forEach((function(e,a){e.value===t.curTab?t.$refs.paging[a].resetFirst():t.$refs.paging[a].clearData()}))},resetCur:function(){var t=this;this.tabs.forEach((function(e,a){e.value===t.curTab?t.$refs.paging[a].resetCur():t.$refs.paging[a].clearData()}))},handleTabChange:function(t){var e=t.name,a=this.tabs.findIndex((function(t){return t.value===e})),n=this.$refs.paging[a].pageData,i=n.currentpage,l=n.pageSize;this.$router.replace({query:Object(u["a"])(Object(u["a"])({},this.$route.query),{},Object(c["a"])({currentpage:i,pageSize:l},this.tabKey,this.curTab))}),this.curTab=e},handleDetail:function(t){I.popup({record:t,resetCur:this.resetCur})}}}),U=R,F=Object(D["a"])(U,s,o,!1,null,null,null),L=F.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"js-filter g-m-b-12"},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输应用别名称搜索",clearable:""},on:{change:t.handleSearch,close:t.handleSearch},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}}),a("el-button",{staticClass:"g-m-l-12",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")])],1),t._t("default",null,{query:t.query})],2)},J=[],K={name:"comp-",components:{},data:function(){return{query:{name:this.$route.query.name}}},methods:{handleSearch:function(){this.$emit("search",this.query)}}},G=K,H=Object(D["a"])(G,z,J,!1,null,null,null),V=H.exports,W={name:"comp-",components:{"r-tab-list":L,"r-filter":V},data:function(){return{}},methods:{handleSearch:function(t){this.$refs.list.search()}}},B=W,M=Object(D["a"])(B,l,r,!1,null,null,null),Q=M.exports,X={name:"view-container",components:{"oa-content":Q}},Y=X,Z=Object(D["a"])(Y,n,i,!1,null,null,null);e["default"]=Z.exports},"0d3f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-info-block",style:{width:t.width}},[a("div",{staticClass:"_info-block__label g-c-black-12",style:{width:t.labelWidth}},[t._v(" "+t._s(t.label)+" ")]),a("div",{staticClass:"_info-block__content g-c-black-6"},[t._t("default",[t._v(" "+t._s(t.content||"--")+" ")])],2)])},i=[],l=(a("a9e3"),{name:"comp-info-item",components:{},props:{label:String,content:[String,Number],tooltip:Boolean,width:{type:String,default:""},labelWidth:{type:String,default:"100px"}},data:function(){return{}},methods:{}}),r=l,s=(a("6d26"),a("2877")),o=Object(s["a"])(r,n,i,!1,null,null,null);e["a"]=o.exports},"1f70":function(t,e,a){},"2cfa":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-footer"},[t._t("default")],2)},i=[],l={name:"comp-footer",components:{},data:function(){return{}},methods:{}},r=l,s=(a("40fa"),a("2877")),o=Object(s["a"])(r,n,i,!1,null,null,null);e["a"]=o.exports},"40fa":function(t,e,a){"use strict";var n=a("7ebf"),i=a.n(n);i.a},"6d26":function(t,e,a){"use strict";var n=a("1f70"),i=a.n(n);i.a},"7ebf":function(t,e,a){}}]);
//# sourceMappingURL=chunk-93ce69f8.9010160f.js.map